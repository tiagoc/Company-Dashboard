@{
    ViewBag.Title = "Estatísticas";
}
<script>
    // Load the Visualization API and the piechart package.
    google.load('visualization', '1.0', {'packages':['corechart']});

    // Set a callback to run when the Google Visualization API is loaded.
    google.setOnLoadCallback(compras_vendas);

    var numeroVendas = 0;
    var numeroCompras = 0;
    var precoVendas = 0;
    var precoCompras = 0;
    var dividaVendas = -4545;
    var pagoVendas = 3000;
    var pagoCompras = 3000;
    var dividaCompras = -3242;

    var requestVenda = $.ajax({
        url: "/api/docvenda",
        type: 'GET',
        async: false,
        cache: false,
        timeout: 30000,
        error: function () {
            return true;
        },
        success: function (data) {
            numeroVendas = data.length;
            for (index in data) {
                precoVendas = precoVendas + data[index].TotalMerc;
            }
        }
    });
    var requestCompra = $.ajax({
        url: "/api/doccompra",
        type: 'GET',
        async: false,
        cache: false,
        timeout: 30000,
        error: function () {
            return true;
        },
        success: function (data) {
            numeroCompras = data.length;
            for (index in data) {
                precoCompras = precoCompras + data[index].TotalMerc;
            }
        }
    });

    // Callback that creates and populates a data table,
    // instantiates the pie chart, passes in the data and
    // draws it.
    function compras_vendas() {

        // Create the data table.
        var data = new google.visualization.DataTable();
        data.addColumn('string', 'Compras/Vendas');
        data.addColumn('number', 'Quantidade');
        data.addRows([
          ['Vendas', precoVendas],
          ['Compras', (-1)*precoCompras]
        ]);

        // Set chart options
        var options = {
            'title': 'Total Monetário em Faturas',
        };

        // Instantiate and draw our chart, passing in some options.
        var chart = new google.visualization.PieChart(document.getElementById('chart_div'));
        chart.draw(data, options);

        $(window).resize(function () {
            chart.draw(data, options);
        });
    }
   
</script>
<div id="chart_div"></div>
